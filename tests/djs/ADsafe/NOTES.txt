====================================================
ADsafety:
====================================================

Properties:
  1 widgets cannot load new code at runtime
  2 widgets cannot affect the DOM (outside their designated subtree)
  3 widgets cannot obtain direct references to the DOM
  4 widgets on the same page cannot communicate

- Blacklist field names:
  * "__proto__"
  * "__nodes__", "__star__": private fields

- Proto: there are several safe prototypes

- Ban guest scripts from accessing specific member names, denoted as "banned".


====================================================
From trying to typecheck the code:
====================================================

- Object.prototype.hasOwnProperty.call(object, "aaa");

- Array: 
  * Array.prototype.slice.call(nodelist, 0);
  * concat, ...

- 09,11 has similar behavior to func04.js

- 10 SLOW !!!
  if (query.length > 0 || match[5].length <= id.length ||
      match[5].slice(0, id.length) !== id) { ... } 

- Add array.concat to fast path.

- it would be quite convenient to add define in included files.

- Cannot assing to: 
  var foo = /*: Ref(~lWeak) */ "#extern";

  foo = null;

  Had to change to:
  var foo /*: Ref(~lWeak) */ = null;

- arguments: Array-like object corresponding to the arguments passed to a
  function.

- Model the window object 
  * Add fields like: console

- Add concatenation ('+') for strings in logic


====================================================
PENDING
====================================================

- Regular expresions

- Higher-order functions:  
  need to restore Sub.checkArrows

- Exception throwing/handling


====================================================
QUESTIONS
====================================================

- Example: 
  for (...) {
    a = /*: lA */ {};  
  }
  Is this location a single one?

- The following is not allowed, because r is considered
thawed in the body of foo. Can this be relaxed?

  thaw r;

  var foo = function() {

    thaw r;
    r.a ... 
    freeze r;

  }

  freeze r;

  see 30-the_event.js
