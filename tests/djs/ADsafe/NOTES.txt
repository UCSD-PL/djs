====================================================
ADsafety:
====================================================

Properties:
  1 widgets cannot load new code at runtime
  2 widgets cannot affect the DOM (outside their designated subtree)
  3 widgets cannot obtain direct references to the DOM
  4 widgets on the same page cannot communicate

- Blacklist field names:
  * "__proto__"
  * "__nodes__", "__star__": private fields

- Proto: there are several safe prototypes

- Ban guest scripts from accessing specific member names, denoted as "banned".


====================================================
From trying to typecheck the code:
====================================================

- Higher-order functions:  
  need to restore Sub.checkArrows

- Exception throwing/handling

- Object.prototype.hasOwnProperty.call(object, "aaa");

- Array: 
  * Array.prototype.slice.call(nodelist, 0);
  * concat, ...

- Naming/Scope:
  * Scoping issue makes user have to rename variables:
    TS-Let-Bare: let __name = ...
    [__name] already in scope, so please use a different name.

  * Variable names all capital (e.g. ADSAFE)


- Probably going to need an "assume" statement. ADSafety recognizes runtime
  checks of the form: reject_global(this).

- Regular expresion support


====================================================
NOTES
====================================================

- x["f"] when used as a "boolean" condition should be typed as truthy or falsy. 

- Using single (strong) location for Document.


====================================================
THINK ABOUT
====================================================

- When can a weak location be updated?
- Implicit thawing?
