weak (~lPreferences: {
  getValue: (this: Ref(~lPreferences),Top, Top) -> Int,
  setValue: (this: Ref(~lPreferences), Str,Top) -> Top
  } > lObjPro)

weak (~lExtensions: {
    prefs: Ref(~lPreferences)
  } > lObjPro)

weak (~lApplication_extensions: {
    get: (this: Ref(~lApplication_extensions), Str) -> Ref(~lExtensions)
  } > lObjPro)


weak (~lApplication: {
    console: Ref(~lConsole),
    extensions: Ref(~lApplication_extensions)
  } > lObjPro)

weak (~lFIApp: { } > lObjPro)
weak (~lNSIEMan: { } > lObjPro)
weak (~lNSIPBranch: { } > lObjPro)

weak (~lMFApplication: {
    getService: (this: Ref(~lMFApplication), Ref(~lFIApp)) -> Ref(~lApplication)
  }  > lObjPro)

weak (~lMEManager: {
    getService: (this: Ref(~lMEManager), Ref(~lNSIEMan)) -> Ref(~lnsIExtensionManager)
  }  > lObjPro)

weak (~lMOFilePicker: {
    createInstance: (this: Ref(~lMOFilePicker), Ref(~lnsIFilePicker)) -> Ref(~lFilePicker) 
  } >lObjPro)

weak (~lnsIPrefBranch: {
    setCharPref: (this: Ref(~lnsIPrefBranch), Str, Str) -> Top
  } > lObjPro)


weak (~lMOPService: {
    getService: (this: Ref(~lMOPService), Ref(~lNSIPBranch)) -> Ref(~lnsIPrefBranch)
  } > lObjPro)

weak (~lnsIUpdateItem: {
    version: Str
  } > lObjPro)

weak (~lnsIExtensionManager: {
    getItemForID: (this: Ref(~lnsIExtensionManager), Str) -> Ref(~lnsIUpdateItem) 
  } > lObjPro)

weak (~lComponents_classes: {
    mozilla_org__fuel__application_1: Ref(~lMFApplication),
    mozilla_org__extensions__manager_1: Ref(~lMEManager),
    mozilla_org__filepicker_1: Ref(~lMOFilePicker),
    mozilla_org__preferences_service_1: Ref(~lMOPService)
  } > lObjPro)

weak (~lComponents_interfaces: {
    fuelIApplication: Ref(~lFIApp),
    nsIExtensionManager: Ref(~lNSIEMan),
    nsIFilePicker: Ref(~lnsIFilePicker),
    nsIPrefBranch: Ref(~lNSIPBranch)
  } > lObjPro)

weak (~lComponents: {
    classes: Ref(~lComponents_classes),
    interfaces: Ref(~lComponents_interfaces)
  } > lObjPro)

weak (~lConsole: {
    log: (Str) -> Top,
    open: ( ) -> Top
  } > lObjPro)

weak (~lRsDownloadHelper: { 
    
    p: Ref(~lRsDownloadHelperP),

    initExtensionPref: (this:Top) / ( ~lLib: frzn, ~lId: frzn, ~lF: frzn, ~lDom:
      frzn, ~lDocument: frzn, ~lNode: frzn, ~lSelection: frzn, ~lStyle: frzn,
      ~lBunch: frzn, ~lBunches: frzn, ~lQuery: frzn, ~lRange: frzn, ~lSelector:
        frzn, ~lEventTarget: frzn, ~lEvent: frzn, ~lStyles: frzn, ~lKeys: frzn,
        ~lOffsetWidths: frzn, ~lOffsetHeights: frzn, ~lValues: frzn,
        ~lPackedValues: frzn, ~lNames: frzn, ~lADsafeMarks: frzn, ~lClassNames:
          frzn, ~lChecked: frzn, ~lNodes: frzn, ~lWindow: frzn,
          ~lRsDownloadHelperP: frzn, ~lRsDownloadHelper: frzn, ~lConsole: frzn,
          ~lComponents: frzn, ~lComponents_interfaces: frzn,
          ~lComponents_classes: frzn, ~lnsIExtensionManager: frzn,
          ~lnsIUpdateItem: frzn, ~lMEManager: frzn, ~lMFApplication: frzn,
          ~lNSIEMan: frzn, ~lFIApp: frzn, ~lApplication: frzn,
            ~lURI: frzn,
          ~lApplication_extensions: frzn, ~lExtensions: frzn, ~lPreferences:
            frzn, &window: locinvar_000117:Ref(~lWindow) [Ref(~lWindow)],
            &Components: locinvar_000119:Ref(~lComponents) [Ref(~lComponents)],
            &Application: locinvar_000121:Ref(~lApplication)
            [Ref(~lApplication)],
            ~lBrowser: frzn, ~lTab: frzn
          ,~lInput: frzn
          , ~lnsIFilePicker: frzn
          , ~lFilePicker: frzn, ~lMOFilePicker: frzn
          , ~lFile: frzn
      , ~lNSIPBranch: frzn, ~lnsIPrefBranch: frzn, ~lMOPService: frzn
            ) -> Top / sameType,

    setVer: (this:Top) / (&Application: locinvar_000167:Ref(~lApplication)
    [Ref(~lApplication)], &Components: locinvar_000169:Ref(~lComponents)
    [Ref(~lComponents)], &window: locinvar_000171:Ref(~lWindow) [Ref(~lWindow)],
    ~lPreferences: frzn, ~lExtensions: frzn, ~lApplication_extensions: frzn,
    ~lApplication: frzn, ~lFIApp: frzn, ~lNSIEMan: frzn, ~lMFApplication: frzn,
    ~lMEManager: frzn, ~lnsIUpdateItem: frzn, ~lnsIExtensionManager: frzn,
    ~lComponents_classes: frzn, ~lComponents_interfaces: frzn, ~lComponents:
      frzn, ~lConsole: frzn, ~lRsDownloadHelper: frzn, ~lRsDownloadHelperP:
        frzn, ~lWindow: frzn, ~lNodes: frzn, ~lChecked: frzn, ~lClassNames:
          frzn, ~lADsafeMarks: frzn, ~lNames: frzn, ~lPackedValues: frzn,
          ~lValues: frzn, ~lOffsetHeights: frzn, ~lOffsetWidths: frzn, ~lKeys:
            frzn, ~lStyles: frzn, ~lEvent: frzn, ~lEventTarget: frzn,
            ~lSelector: frzn, ~lRange: frzn, ~lQuery: frzn, ~lBunches: frzn,
            ~lBunch: frzn, ~lStyle: frzn, ~lSelection: frzn, ~lNode: frzn,
            ~lDocument: frzn, ~lDom: frzn, ~lF: frzn, ~lId: frzn, ~lLib: frzn,
            ~lURI: frzn,
            ~lBrowser: frzn, ~lTab: frzn
          ,~lInput: frzn
      , ~lnsIFilePicker: frzn
      , ~lFilePicker: frzn, ~lMOFilePicker: frzn
      , ~lFile: frzn
      , ~lNSIPBranch: frzn, ~lnsIPrefBranch: frzn, ~lMOPService: frzn
    )
    -> Top / sameType ,

    contentLoadedSuccess: (this:Top, Ref(~lEvent)) / (~lLib: frzn, ~lId: frzn,
    ~lF: frzn, ~lDom: frzn, ~lDocument: frzn, ~lNode: frzn, ~lSelection: frzn,
    ~lStyle: frzn, ~lBunch: frzn, ~lBunches: frzn, ~lQuery: frzn, ~lRange: frzn,
    ~lSelector: frzn, ~lEventTarget: frzn, ~lEvent: frzn, ~lStyles: frzn,
    ~lKeys: frzn, ~lOffsetWidths: frzn, ~lOffsetHeights: frzn, ~lValues: frzn,
    ~lPackedValues: frzn, ~lNames: frzn, ~lADsafeMarks: frzn, ~lClassNames:
      frzn, ~lChecked: frzn, ~lNodes: frzn, ~lInput: frzn, ~lTab: frzn,
      ~lBrowser: frzn, ~lFile: frzn, ~lFilePicker: frzn, ~lnsIFilePicker: frzn,
      ~lWindow: frzn, ~lRsDownloadHelperP: frzn, ~lRsDownloadHelper: frzn,
      ~lConsole: frzn, ~lComponents: frzn, ~lComponents_interfaces: frzn,
            ~lURI: frzn,
      ~lComponents_classes: frzn, ~lnsIExtensionManager: frzn, ~lnsIUpdateItem:
        frzn, ~lMOPService: frzn, ~lnsIPrefBranch: frzn, ~lMOFilePicker: frzn,
        ~lMEManager: frzn, ~lMFApplication: frzn, ~lNSIPBranch: frzn, ~lNSIEMan:
          frzn, ~lFIApp: frzn, ~lApplication: frzn, ~lApplication_extensions:
            frzn, ~lExtensions: frzn, ~lPreferences: frzn, &window:
              locinvar_000639:Ref(~lWindow) [Ref(~lWindow)], &Components:
                locinvar_000641:Ref(~lComponents) [Ref(~lComponents)],
                &Application: locinvar_000643:Ref(~lApplication)
                [Ref(~lApplication)]) -> Top / sameType,

    initialize: (this:Top) / ( ~lLib: frzn, ~lId: frzn, ~lF: frzn, ~lDom: frzn,
    ~lDocument: frzn, ~lNode: frzn, ~lSelection: frzn, ~lStyle: frzn, ~lBunch:
      frzn, ~lBunches: frzn, ~lQuery: frzn, ~lRange: frzn, ~lSelector: frzn,
      ~lEventTarget: frzn, ~lEvent: frzn, ~lStyles: frzn, ~lKeys: frzn,
      ~lOffsetWidths: frzn, ~lOffsetHeights: frzn, ~lValues: frzn,
      ~lPackedValues: frzn, ~lNames: frzn, ~lADsafeMarks: frzn, ~lClassNames:
        frzn, ~lChecked: frzn, ~lNodes: frzn, ~lRsDownloadHelperP: frzn,
        ~lRsDownloadHelper: frzn, ~lConsole: frzn, ~lComponents: frzn,
        ~lComponents_interfaces: frzn, ~lComponents_classes: frzn,
            ~lURI: frzn,
        ~lnsIExtensionManager: frzn, ~lnsIUpdateItem: frzn, ~lMEManager: frzn,
        ~lMFApplication: frzn, ~lNSIEMan: frzn, ~lFIApp: frzn, ~lApplication:
          frzn, ~lApplication_extensions: frzn, ~lExtensions: frzn,
          ~lPreferences: frzn, &window: locinvar_000095:Ref(~lNode)
          [Ref(~lNode)], &Components: locinvar_000097:Ref(~lComponents)
          [Ref(~lComponents)], &Application: locinvar_000099:Ref(~lApplication)
          [Ref(~lApplication)],
          ~lWindow: frzn,
          ~lBrowser: frzn, ~lTab: frzn
          ,~lInput: frzn
      , ~lnsIFilePicker: frzn
      , ~lFilePicker: frzn, ~lMOFilePicker: frzn
      , ~lFile: frzn
      , ~lNSIPBranch: frzn, ~lnsIPrefBranch: frzn, ~lMOPService: frzn
          ) -> Top / sameType,

    openFilePicker: (this: Top, Ref(~lInput), Str) / ( ~lLib: frzn, ~lId: frzn, ~lF: frzn,
    ~lDom: frzn, ~lDocument: frzn, ~lNode: frzn, ~lSelection: frzn, ~lStyle:
      frzn, ~lBunch: frzn, ~lBunches: frzn, ~lQuery: frzn, ~lRange: frzn,
      ~lSelector: frzn, ~lEventTarget: frzn, ~lEvent: frzn, ~lStyles: frzn,
      ~lKeys: frzn, ~lOffsetWidths: frzn, ~lOffsetHeights: frzn, ~lValues: frzn,
      ~lPackedValues: frzn, ~lNames: frzn, ~lADsafeMarks: frzn, ~lClassNames:
        frzn, ~lChecked: frzn, ~lNodes: frzn, ~lInput: frzn, ~lTab: frzn,
        ~lBrowser: frzn, ~lWindow: frzn, ~lRsDownloadHelperP: frzn,
        ~lRsDownloadHelper: frzn, ~lConsole: frzn, ~lComponents: frzn,
        ~lComponents_interfaces: frzn, ~lComponents_classes: frzn,
        ~lnsIExtensionManager: frzn, ~lnsIUpdateItem: frzn, ~lMEManager: frzn,
            ~lURI: frzn,
        ~lMFApplication: frzn, ~lNSIEMan: frzn, ~lFIApp: frzn, ~lApplication:
          frzn, ~lApplication_extensions: frzn, ~lExtensions: frzn,
          ~lPreferences: frzn, &window: locinvar_000365:Ref(~lWindow)
          [Ref(~lWindow)], &Components: locinvar_000367:Ref(~lComponents)
          [Ref(~lComponents)], &Application: locinvar_000369:Ref(~lApplication)
          [Ref(~lApplication)]
      , ~lnsIFilePicker: frzn
      , ~lFilePicker: frzn, ~lMOFilePicker: frzn
      , ~lFile: frzn
      , ~lNSIPBranch: frzn, ~lnsIPrefBranch: frzn, ~lMOPService: frzn
          )-> Top / sameType,

    getFileName: (this: Top, Ref(~lDocument)) / (&Application:
      locinvar_000566:Ref(~lApplication) [Ref(~lApplication)], &Components:
        locinvar_000568:Ref(~lComponents) [Ref(~lComponents)], &window:
          locinvar_000570:Ref(~lWindow) [Ref(~lWindow)], ~lPreferences: frzn,
          ~lExtensions: frzn, ~lApplication_extensions: frzn, ~lApplication:
            frzn, ~lFIApp: frzn, ~lNSIEMan: frzn, ~lNSIPBranch: frzn,
            ~lMFApplication: frzn, ~lMEManager: frzn, ~lMOFilePicker: frzn,
            ~lnsIPrefBranch: frzn, ~lMOPService: frzn, ~lnsIUpdateItem: frzn,
            ~lnsIExtensionManager: frzn, ~lComponents_classes: frzn,
            ~lComponents_interfaces: frzn, ~lComponents: frzn, ~lConsole: frzn,
            ~lRsDownloadHelper: frzn, ~lRsDownloadHelperP: frzn, ~lWindow: frzn,
            ~lURI: frzn,
            ~lnsIFilePicker: frzn, ~lFilePicker: frzn, ~lFile: frzn, ~lBrowser:
              frzn, ~lTab: frzn, ~lInput: frzn, ~lNodes: frzn, ~lChecked: frzn,
              ~lClassNames: frzn, ~lADsafeMarks: frzn, ~lNames: frzn,
              ~lPackedValues: frzn, ~lValues: frzn, ~lOffsetHeights: frzn,
              ~lOffsetWidths: frzn, ~lKeys: frzn, ~lStyles: frzn, ~lEvent: frzn,
              ~lEventTarget: frzn, ~lSelector: frzn, ~lRange: frzn, ~lQuery:
                frzn, ~lBunches: frzn, ~lBunch: frzn, ~lStyle: frzn,
                ~lSelection: frzn, ~lNode: frzn, ~lDocument: frzn, ~lDom: frzn,
                ~lF: frzn, ~lId: frzn, ~lLib: frzn) -> Str / sameType

    
  } > lObjPro)

weak (~lRsDownloadHelperP: Dict > lObjPro)

weak (~lWindow: {
    setTimeout: 
      (this:Ref(~lWindow), (this:Top) / (~lLib: frzn, ~lId: frzn, ~lF: frzn,
      ~lDom: frzn, ~lDocument: frzn, ~lNode: frzn, ~lSelection: frzn, ~lStyle:
      frzn, ~lBunch: frzn, ~lBunches: frzn, ~lQuery: frzn, ~lRange: frzn,
      ~lSelector: frzn, ~lEventTarget: frzn, ~lEvent: frzn, ~lStyles: frzn,
      ~lKeys: frzn, ~lOffsetWidths: frzn, ~lOffsetHeights: frzn, ~lValues: frzn,
      ~lPackedValues: frzn, ~lNames: frzn, ~lADsafeMarks: frzn, ~lClassNames:
      frzn, ~lChecked: frzn, ~lNodes: frzn, ~lWindow: frzn, ~lRsDownloadHelperP:
      frzn, ~lRsDownloadHelper: frzn, ~lConsole: frzn, ~lComponents: frzn,
            ~lURI: frzn,
      ~lComponents_interfaces: frzn, ~lComponents_classes: frzn,
      ~lnsIExtensionManager: frzn, ~lnsIUpdateItem: frzn, ~lMEManager: frzn,
      ~lMFApplication: frzn, ~lNSIEMan: frzn, ~lFIApp: frzn, ~lApplication:
      frzn, ~lApplication_extensions: frzn, ~lExtensions: frzn,
      ~lPreferences: frzn, &window: locinvar_000212:Ref(~lWindow)
      [Ref(~lWindow)], &Components: locinvar_000214:Ref(~lComponents)
      [Ref(~lComponents)], &Application: locinvar_000216:Ref(~lApplication)
      [Ref(~lApplication)],
      ~lBrowser: frzn, ~lTab: frzn
      , ~lnsIFilePicker: frzn
      , ~lFilePicker: frzn, ~lMOFilePicker: frzn
      , ~lFile: frzn
      , ~lNSIPBranch: frzn, ~lnsIPrefBranch: frzn, ~lMOPService: frzn
      ) -> Top / sameType, Num) -> Top , 
      
    setInterval: (this: Top, (this: Top) / (&Application:
      locinvar_000768:Ref(~lApplication) [Ref(~lApplication)], &Components:
        locinvar_000770:Ref(~lComponents) [Ref(~lComponents)], &window:
          locinvar_000772:Ref(~lWindow) [Ref(~lWindow)], ~lPreferences: frzn,
          ~lExtensions: frzn, ~lApplication_extensions: frzn, ~lApplication:
            frzn, ~lFIApp: frzn, ~lNSIEMan: frzn, ~lNSIPBranch: frzn,
            ~lMFApplication: frzn, ~lMEManager: frzn, ~lMOFilePicker: frzn,
            ~lnsIPrefBranch: frzn, ~lMOPService: frzn, ~lnsIUpdateItem: frzn,
            ~lnsIExtensionManager: frzn, ~lComponents_classes: frzn,
            ~lComponents_interfaces: frzn, ~lComponents: frzn, ~lConsole: frzn,
            ~lRsDownloadHelper: frzn, ~lRsDownloadHelperP: frzn, ~lWindow: frzn,
            ~lnsIFilePicker: frzn, ~lFilePicker: frzn, ~lFile: frzn, ~lBrowser:
              frzn, ~lTab: frzn, ~lInput: frzn, ~lNodes: frzn, ~lChecked: frzn,
              ~lClassNames: frzn, ~lADsafeMarks: frzn, ~lNames: frzn,
              ~lPackedValues: frzn, ~lValues: frzn, ~lOffsetHeights: frzn,
              ~lOffsetWidths: frzn, ~lKeys: frzn, ~lStyles: frzn, ~lEvent: frzn,
              ~lEventTarget: frzn, ~lSelector: frzn, ~lRange: frzn, ~lQuery:
                frzn, ~lBunches: frzn, ~lBunch: frzn, ~lStyle: frzn,
                ~lSelection: frzn, ~lNode: frzn, ~lDocument: frzn, ~lDom: frzn,
                ~lF: frzn, ~lId: frzn, ~lLib: frzn, ~lURI: frzn) -> Top /
                sameType, Num) -> Int,
 
    setInterval: (this: Top, Int) -> Top,
               
    document:
      Ref(~lNode) 
  } > lObjPro)

(* https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIFilePicker *)
weak (~lnsIFilePicker: {
  modeSave: Top,
  returnOK: {(= v 0)},
  returnCancel: {(= v 1)},
  returnReplace: {(= v 2)}
  } > lObjPro)

weak (~lFilePicker: {
    init: (this:Ref(~lFilePicker), Ref(~lWindow), Str, Top) -> Top,
    defaultString: Str,
    appendFilter: (this: Ref(~lFilePicker), Str, Str) -> Top,
    displayDirectory: Ref(~lFile),
    file: Ref(~lFile)
  } > lObjPro)

weak (~lFile: {
    path: Str
  } > lObjPro)

weak (~lBrowser: {
    selectedTab: Ref(~lTab),
    addTab: (this:Ref(~lBrowser), Str) -> Top,
    show: (this:Ref(~lBrowser)) -> Int
  } > lObjPro)

weak (~lTab: {

  } > lObjPro)

weak (~lInput: {
    value: Str 
  } > lObjPro)
